# 2025-12-13 작업 내역

## 1. 설정 페이지 (Settings) UI 개선
- **레이아웃 확장**: 전체 컨테이너 너비를 `1820px`로 확장하여 다른 메인 페이지들과 통일성을 맞춤.
- **사이드바 조정**: 사이드바 너비를 `400px`로 늘리고, 패널 패딩을 확대하여 여유로운 공간 확보.
- **타이포그래피 및 입력폼**: 제목, 설명 텍스트, 입력 필드의 크기를 키워("Chunky" 스타일) 가독성과 사용성을 개선.

## 2. 프로필 이미지 동기화 (Profile Image Sync)
- **기능**: 사용자가 선택한 페르소나 캐릭터(Rabbit, Bear 등)가 설정 페이지 사이드바의 프로필 이미지로 즉시 반영되도록 구현.
- **구현**: 
  - `views.py`의 `setting` 뷰에서 캐릭터 이미지를 컨텍스트로 전달.
  - `styles.css`의 하드코딩된 배경 이미지를 제거하고 `<img>` 태그로 동적 렌더링.

## 3. 커스텀 캐릭터 이미지 업로드 (Custom Image Upload)
- **기능**: 사용자가 직접 이미지 파일을 업로드하여 캐릭터 대신 프로필로 사용할 수 있는 기능 추가.
- **백엔드 구현**:
  - `UserProfile` 모델에 `custom_image` (ImageField) 및 `use_custom_image` (BooleanField) 필드 추가.
  - `upload_character_image` API 구현 (이미지 저장 및 플래그 설정).
  - `settings.py` 및 `urls.py`에 미디어 파일 서빙 설정 추가 (`MEDIA_ROOT`, `MEDIA_URL`).
- **프론트엔드 구현**:
  - 설정 페이지 사이드바에 파일 업로드 버튼 추가.
  - 이미지 업로드 시 즉시 프로필에 반영.

## 4. 로직 및 연동 개선
- **우선순위 로직 (Last Action Wins)**:
  - 캐릭터를 선택하면 `use_custom_image=False`로 설정되어 캐릭터 이미지가 우선.
  - 이미지를 업로드하면 `use_custom_image=True`로 설정되어 커스텀 이미지가 우선.
  - 이를 통해 사용자가 가장 최근에 의도한 설정을 유지.
- **채팅 인터페이스 연동**:
  - 채팅 페이지(`chat.html`, `chat.js`)에서 사용자 아바타와 AI 아바타가 모두 커스텀 이미지를 반영하도록 수정.
  - `localStorage`와 서버 주입 데이터를 연동하여 페이지 이동 시에도 일관된 이미지 표시.
